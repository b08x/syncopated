---

- block:
    - name: Set rtirq defaults
      register: rtirq_config

        # rtkit package should be Installed before this happens
      ansible.builtin.copy:
        src: etc/sysconfig/rtirq
        dest: /etc/rtirq.conf
        directory_mode: false
        owner: root
        group: root
        mode: '0644'

    - name: Set rtkit parameters
      register: rtkit_conf
      ansible.builtin.copy:
        src: etc/rtkit.conf
        dest: /etc/rtkit.conf
        directory_mode: false
        owner: root
        group: root
        mode: '0644'

    - name: Set rtkit systemd parameters
      template:
        src: usr/lib/systemd/system/rtkit-daemon.service.j2
        dest: /usr/lib/systemd/system/rtkit-daemon.service
        mode: '0644'
      register: rtkit_systemd

  tags: ['rtirq', 'rtkit']
  notify:
    - "enable rtirq service"
    - "enable rtkit service"
